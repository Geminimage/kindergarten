
                                                                                  
                                                                          
 	 	 	
    
  <!DOCTYPE HTML>
  <html>
    <head>
      <meta charset="utf-8">
      <title>微信公众平台</title>
      
  <link rel="stylesheet" type="text/css" href="https://res.wx.qq.com/mpres/htmledition/style/common169eab.css"/>
  <link rel="stylesheet" type="text/css" href="https://res.wx.qq.com/mpres/htmledition/style/emoji15def8.css"/>
        <link href="https://res.wx.qq.com/mpres/htmledition/images/favicon15def7.ico" rel="Shortcut Icon">
    </head>
    <body class="zh_CN">  
                        <div id="warningUser" class="none">
        <div class="warningWrap">
          <span class="left index-tip-icon"></span>
          <h3 style="margin:10px 0 10px 65px;">关于打击违法违规行为规范微信公众平台运营的公告</h3><p style="margin:10px 0 10px 65px;">微信公众平台一直致力于为用户提供文明健康、规范有序的网络环境。近期，我们在运营中发现部分公众帐号用户在下发消息中推送垃圾广告、骚扰信息甚至色情、暴力等违法违规的内容，或者进行强制、诱导分享，虚假、与帐号无关的推广等恶意行为。上述内容和行为已严重干扰了微信公众平台的正常运营，更涉及侵犯其他用户或第三方的合法权益。为了进一步规范平台运营，保障合法权益，我们将对违法违规内容进行清理，并对相关行为进行处罚。</p><a target="_blank" href="/cgi-bin/readtemplate?t=wxm-agreement&type=info&lang=zh_CN" style="margin-left:65px">查看微信公众平台服务协议</a>        </div>
        <div class="btnArea">
          <button class="waringClose btnGreen">确定</button>
        </div>
        <div class="waringClose iconClose"></div>
      </div>
                        <div id="header" class="header"></div>
      <div class="container-wrapper"><div id="main" class="container"></div></div>
      <div id="footer" class="footer"></div>
      
      
  <script type="text/javascript" src="https://res.wx.qq.com/mpres/zh_CN/htmledition/js/jquery-1.7.2.min15def8.js"></script>
  <script type="text/javascript" src="https://res.wx.qq.com/mpres/zh_CN/htmledition/js/wxm-core16aa22.js"></script>
  <script type="text/javascript">
    WXM.Conf = {};
    WXM.Conf.protocol = (function(){
      if(location.host.indexOf("dev")<0 && location.host.indexOf("991") < 0){
        return 'https';
      } 
      return 'http';
    })();

  </script>
  <script type="text/javascript">
    (function autoMonitorReport(WXM){
      var fakeid = "2390329504" || "";
      var userAgent = window.navigator.userAgent || "", curUrl = location.href;
      var log = WXM.Log, format = WXM.THelper.format;

      //js运行时异常
      window.onerror = function( msg, url, line ){
        if( msg == 'Script error.'){
          return ;
        }
        url = url == "" ? curUrl : url; 
        log.error(  format( '[fakeid=%s] [runtime] [url=%s] [useragent=%s] [line=%s] [msg=%s]', fakeid, url, userAgent, line, msg ), 3 );
      };

      //图片加载异常
      jQuery("img").error(function(){
        log.error( format( '[fakeid=%s] [img] [url=%s] [useragent=%s] [src=%s]', fakeid, curUrl, userAgent, jQuery(this).attr('src') ), 1 ); 
      });

      //脚本加载异常
      jQuery("script").error(function(){
        log.error( format( '[fakeid=%s] [script] [url=%s] [useragent=%s] [src=%s]', fakeid, curUrl, userAgent, jQuery(this).attr('src') ), 2 );
      });
    })(WXM);

    (function(jq){
      var h = WXM.Helpers,
        getC = h.getCookie,
        setC = h.setCookie,
        cName = 'hasWarningUser',
        isSetC = getC(cName);
      //警告用户的cookie需要在退出后清除
      WXM.logout = function(){
        setC(cName, 1, -1);//set cookie
        setC('cb_api_open', 1, -1);//set cookie
        setC('cb_api_close', 1, -1);//set cookie
        setC('hasNotifyList', 1, -1);//set cookie
      }
    })(jQuery);

    function wx_get(loc)
    {
        var wl = window.location;
        var ourl=wl.protocol+"//"+wl.host+"/cgi-bin/getico";
        var timg = new Image(1, 1);
        loc = loc || -1;
        timg.src = ourl + "?location="+loc+"&rand=" + Math.random();
    }

    wx_get("625");
  </script>
    
  <!--
  <script type="text/javascript" src="https://res.wx.qq.com/mpres/zh_CN/htmledition/js/noie6.js"></script>
  -->
  
    </body>
  </html>
    <script id="tCommonHeaderNav" type="text/html"><#WXM#/*TEMPLATES*/#WXM#>
    <div class="navigator">
      <ul class="textLarge">
        <#WXM#
          var i=0,item;
          while(item = nav[i++]){
        #WXM#>
          <li
            <#WXM# if (item.selected){ #WXM#>
              class="selected"><a href="<#WXM#=item.link#WXM#>">
            <#WXM# } else {#WXM#>
              ><a href="<#WXM#=item.link#WXM#>">
          <#WXM# } #WXM#><#WXM#=item.name#WXM#></a>
          </li>
        <#WXM# 
          } 
        #WXM#>
      </ul>
    </div>
  </script>
  
    <script id="tCommonHeader" type="text/html"><#WXM#/*TEMPLATES*/#WXM#>
    <div class="logo_area">
      <div class="wrapper" >
        <img src="https://res.wx.qq.com/mpres/htmledition/images/new/logo15def7.png" onclick="javascript:location.href='/'" alt="微信公众平台" />
        <span class="hd_login_info">
            <#WXM#=
                userinfo && userinfo.FakeID  ? WXM.Helpers.tmpl('#tCommonHeaderLogin', userinfo)
                : WXM.Helpers.tmpl('#tCommonHeaderNologin', userinfo)
                #WXM#>
        </span>
        <div id="headNotifyList" class="logo_notify_list none">
        </div>
      </div>
    </div>
    <#WXM#=
      userinfo  ? WXM.Helpers.tmpl('#tCommonHeaderNav', WXM.DATA)
          : ''
    #WXM#>
    
  </script>
  
    <script id="tCommonHeaderLogin" type="text/html"><#WXM#/*TEMPLATES*/#WXM#>
	<span><a href="/cgi-bin/userinfopage?t=wxm-setting&token=1039713218&lang=zh_CN" style="padding-right:0;"><#WXM#=NickName#WXM#></a></span><span class="none"><a href="#">帮助中心</a></span><span><a class="hd_login_notify" href="/cgi-bin/indexpage?token=1039713218&t=wxm-notification-center&lang=zh_CN">通知<img id="notifyIcon" class="none" src="https://res.wx.qq.com/mpres/htmledition/images/icon12_notify15def7.png"/></a>|<a onclick="return WXM.logout();" href="/cgi-bin/logout?t=wxm-logout&token=1039713218&lang=zh_CN">退出</a></span>
  </script>

    <script id="tCommonHeaderNologin" type="text/html"><#WXM#/*TEMPLATES*/#WXM#>
    <span><a href="mailto:mpweixin@qq.com">咨询请发邮件至：mpweixin@qq.com</a></span>
    <span class="none"><a href="#">帮助中心</a></span> 
  </script>

    <script id="tCommonFooter" type="text/html"><#WXM#/*TEMPLATES*/#WXM#>
    <span>
        <a target="_blank" href="http://www.tencent.com/zh-cn/index.shtml">关于腾讯</a>&nbsp;|&nbsp;      
        <a target="_blank" href="/cgi-bin/readtemplate?t=wxm-agreement&type=info&lang=zh_CN">服务协议</a>&nbsp;|&nbsp;
        <a target="_blank" href="http://kf.qq.com/special_auto/weixin.html">客服中心</a>
      </span>
      
      <span>Copyright&nbsp;&copy; 2012-2013 Tencent. All Rights Reserved.</span>
  </script>
  
  <script id="tCommonCatalogList" type="text/html"><#WXM#/*TEMPLATES*/#WXM#>
    <div class="sideBar">
      <div class="catalogList">
        <ul>
        <#WXM#
          var i=0, item;
          while(item = catalogList[i++]) {
        #WXM#>
            <li 
              <#WXM# if (item.id) {#WXM#>
                id="<#WXM#=item.id#WXM#>"
              <#WXM# } #WXM#>
              class="<#WXM#=item.selected||''#WXM#> <#WXM#=item.subCatalogList||''#WXM#> <#WXM#=item.className#WXM#>"
            >
              <#WXM# if(item.link){ #WXM#>
                <a href="<#WXM#=item.link#WXM#>"><#WXM#=item.title#WXM#><#WXM#=item.num!==undefined?"("+item.num+")":""#WXM#></a>
              <#WXM# } else { #WXM#>
                <span><#WXM#=item.title#WXM#><#WXM#=item.num!==undefined?"("+item.num+")":""#WXM#></span>
              <#WXM# } #WXM#>
            </li>
        <#WXM#
          }
        #WXM#>
        </ul>
      </div>
    </div>
  </script>
  <script id="tCommonMain" type="text/html"><#WXM#/*TEMPLATES*/#WXM#>
    <div class="containerBox">
      
      <#WXM# if (title){ #WXM#>
      <div class="boxHeader">
        <h2><#WXM#=title#WXM#></h2>
      </div>
      <#WXM# } #WXM#>
      
      <div class="content"></div>
      
      <#WXM#=
        catalogList
        ?WXM.Helpers.tmpl('#tCommonCatalogList', {
          catalogList : catalogList
        }) 
        : ''
      #WXM#> 
      <div class="clr"></div>
    </div>
  </script>
  
    <script id="tTips" type="text/html"><#WXM#/*TEMPLATES*/#WXM#>
    <div class="tips">
      <div class="tipContent"></div>
    </div>
  </script>
  
  <script id="tDialog" type="text/html"><#WXM#/*TEMPLATES*/#WXM#>
    <div class="dialogBox">
      <div class="background"></div>
      <div id="dialogBox" class="dialog">
        <div id="dialogTitle" class="title">标题</div>
        <a class="close-tip-icon" id="dialogTopClose" style="display:block;" href="javascript:;" title="关闭"></a>
        <div id="dialogContent" class="content"></div>
        <div class="operation">
          <button id="dialogBack" class="btn btnGray" style="display:none;">返回</button>
          <button id="dialogStep" class="btn btnGreen" style="display:none;">同意并进行下一步</button>
          <button id="dialogOK" class="btn btnGreen">确定</button>
          <button id="dialogCancle" class="btn btnGray">取消</button>
          <button id="dialogClose" class="btn btnGray" style="display:none;">关闭</button>
        </div>
      </div>
    </div>
  </script>
  <script id="tLoadingDialog" type="text/html"><#WXM#/*TEMPLATES*/#WXM#>
    <div class="dialogBox">
      <div class="background"></div>
      <div id="loadingDialogBox" class="dialog">
        <div class="content"><div class="iconLoading"></div><p>加载中...</p></div>
      </div>
    </div>
  </script>
  <script id="tLoading" type="text/html"><#WXM#/*TEMPLATES*/#WXM#>
    <div class="loading">数据加载中...</div>
  </script>
  
    <script type="text/javascript">
  document.domain = document.location.hostname.match(/[^\.]+\.com/)[0];
    var CGI_ROOT = WXM.ROOT.cgi;
        WXM.StaticPath = {
      recorder : "https://res.wx.qq.com/mpres/zh_CN/htmledition/plprecorder/recoder1595d6.html",
      plprecorder: "https://res.wx.qq.com/mpres/zh_CN/htmledition/plprecorder/plprecorder1595d3.swf",
      installer: "https://res.wx.qq.com/mpres/zh_CN/htmledition/plprecorder/expressInstall1595d3.swf",
      video    : "https://res.wx.qq.com/mpres/zh_CN/htmledition/plprecorder/video-js1670d9.swf",
      audio    : "https://res.wx.qq.com/mpres/zh_CN/htmledition/plprecorder/audiojs1670d9.swf",
      rimgcrop : "https://res.wx.qq.com/mpres/htmledition/images/cut-round15def7.gif"
,
      rimgcropframe : "https://res.wx.qq.com/mpres/htmledition/images/cut-round-frame15def7.gif"
,
      spacer: "https://res.wx.qq.com/mpres/htmledition/images/spacer15def7.gif"  

    };

    WXM.Links = {
      indexpage: '/cgi-bin/indexpage',
      viewheadimg: '/cgi-bin/viewheadimg',
      getimgdata: '/cgi-bin/getimgdata',
      getregions: '/cgi-bin/getregions',
      getmessage: '/cgi-bin/getmessage',
      operadvancedfunc: '/cgi-bin/operadvancedfunc',
      masssendpage: '/cgi-bin/masssendpage',
      filemanagepage: '/cgi-bin/filemanagepage',
      operate_appmsg: '/cgi-bin/operate_appmsg',
      fmstransport: '/cgi-bin/fmstransport',
      contactmanagepage: '/cgi-bin/contactmanagepage',
      operselfmenu: '/cgi-bin/operselfmenu',
      replyrulepage: '/cgi-bin/replyrulepage',
      singlemsgpage: '/cgi-bin/singlemsgpage',
      userinfopage: '/cgi-bin/userinfopage',
      devapply: '/cgi-bin/devapply'
    };

    //add token
    for( key in WXM.Links ){
              WXM.Links[ key ] += '?token=' + 1039713218;
          }
          WXM.Token = 1039713218;
        WXM.DATA = {};
    WXM.DATA.userinfo = {};
    WXM.DATA = {
      ROOT : WXM.ROOT,

            userinfo : {
        NickName : "快快长大",
        FakeID   : "2390329504"
      },
            cgiId : "625",


          token: "1039713218",
                        
            nav : [
        {
          _id  : 'home',
          name : "首页", 
          link : '/cgi-bin/indexpage?t=wxm-index&token=1039713218&lang=zh_CN'
        },
        {
          _id  : 'realmsg',
          name : "实时消息", 
          link : '/cgi-bin/getmessage?t=wxm-message&token=1039713218&lang=zh_CN&count=50'
        },
        {
          _id  : 'friend',
          name : "用户管理", 
          link : '/cgi-bin/contactmanagepage?t=wxm-friend&token=1039713218&lang=zh_CN&pagesize=10&pageidx=0&type=0&groupid=0'
        }

                                ,
        {
          _id  : 'groupmsg',
          name : "群发消息",
          link : '/cgi-bin/masssendpage?t=wxm-send&token=1039713218&lang=zh_CN'
        }
                                ,
        {
          _id  : 'filemanager',
          name : "素材管理", 
          link : '/cgi-bin/operate_appmsg?sub=list&type=10&subtype=3&t=wxm-appmsgs-list-new&pagesize=10&pageidx=0&token=1039713218&lang=zh_CN'
        },
        {
          _id  : 'setting',
          name : "设置", 
          link : '/cgi-bin/userinfopage?t=wxm-setting&token=1039713218&lang=zh_CN'
        },
                                        {
          _id  : 'developer',
          name : '高级功能<span class="menu_new"><img src="https://res.wx.qq.com/mpres/htmledition/images/new/icon_new15def7.png"></span>',
          link : '/cgi-bin/operadvancedfunc?op=list&t=wxm-developer-index&token=1039713218&lang=zh_CN'
        }
                                      ],
      
      //权限列表
      ACL : {
                                  'canMassSend' : '1',
          'haveChannel' : '0',
          'needProtocol' : '0',
          'canPublicChannel' : '1',
          'massSendTimesLeft' : '1',
          'haveAutoIvr' : '1',
          'haveFriendIvr' : '1',
          'haveCustomIvr' : '1',
                        'end' : 0
      }
    };

    </script>
<link rel="stylesheet" type="text/css" href="https://res.wx.qq.com/mpres/htmledition/style/wxm_systemi15def8.css"/>
<style>
  .badage_new{color:#b11516;}
</style>
<script type="text/javascript" src="https://res.wx.qq.com/mpres/zh_CN/htmledition/js/highcharts15def8.js"></script>
<script type="text/javascript" src="https://res.wx.qq.com/mpres/zh_CN/htmledition/js/exporting15def8.js"></script>
<script id="tIndexMain" type="text/html"><#WXM#/*TEMPLATES*/#WXM#>
  <div class="containerBox boxIndex">
	<!--part 1-->
	<div style="">
		<div class="mainPanel">
		  <h2 class="h2">欢迎你，<#WXM#=userinfo.NickName#WXM#></h2>
		  <div id="index-permission-tip" class="index-tip-wrapper">
								  </div>
		  <div class="todoList">
			<#WXM# if(todoLost.length>0){ #WXM#>
			  <h3 class="">你有以下<#WXM#=todoLost.length#WXM#>个待办事项:</h3>
			  <ul>
				<#WXM# 
				  var i = 0, item, len = todoLost.length, itemClass = "";
				  while(item = todoLost[i++]){
            if(i == len) itemClass = "no-extra";
				#WXM#>
				  <li class="<#WXM#=itemClass#WXM#>"><span class="left"> <#WXM#=item.title#WXM#></span><a class="right" href="<#WXM#=item.link#WXM#>">查看</a></li>
				<#WXM# } #WXM#>
			  </ul>
			<#WXM# } else { #WXM#>
			  <h3 class="no-extra">暂无待办事项</h3>
			<#WXM# } #WXM#>
		  </div>
		  <div class="wxChartsWrapper"><h3>每日新增订阅人数</h3><div id="wxChartsFans" class="wxChart"></div></div>
		  <div class="wxChartsWrapper"><h3>每日接收消息数</h3><div id="wxChartsMsgNum" class="wxChart"></div></div>
		  <ul class="quickLaunch">
			<#WXM# 
			  var i = 0, item;
			  while(item = quickLaunch[i++]){
				if(item.name){
			#WXM#>
				  <li>
					<a href="<#WXM#=item.link#WXM#>"><span class="icon48C <#WXM#=item.className#WXM#>"><#WXM#=item.name#WXM#></span></a>
				  </li>
			<#WXM# 
				} 
			  }
			#WXM#>
		  </ul>
		</div>
		<div class="extendPanel">
		  <#WXM# 
			var i = 0, item;
			while(item = textInfo[i++]){
		  #WXM#>
		  <div class="extInfo">
			<h3><#WXM#=item.title#WXM#></h3>
			<p><#WXM#=item.content.replace('\n','<br/>')#WXM#></p>
		  </div>
		  <#WXM# 
			} 
		  #WXM#>
      <div class="extNotice">
        <a href="/cgi-bin/readtemplate?t=wxm-mpupdate-sysi&lang=zh_CN">
           系统升级造成群发延迟的说明 </a>
          <b class="badage_new"></b>
      
      </div>

      <div class="extNotice">
        <a href="/cgi-bin/readtemplate?t=wxm-api-msg&type=info&lang=zh_CN">
           公众平台接口更新通知 </a>
          <b class="badage_new"></b>
    
      </div>
             
            <!--个人 申请成功后，首页显示跳转到文档的快速入口-->
      

            <p class="dev_access" style="text-align:center;">
        <a class="btnGreen" style="margin:0px auto;width:174px;" target="_blank" href="http://mp.weixin.qq.com/wiki/index.php?title=%E6%B6%88%E6%81%AF%E6%8E%A5%E5%8F%A3%E6%8C%87%E5%8D%97">查看公众平台API文档</a>
      </p>
            
      <!--个人 申请成功后，首页显示跳转到文档的快速入口 end-->


      <!--
      <p class="dev_access" style="text-align:center;">
        <a class="btnGreen" style="margin:0px auto;width:174px;" target="_blank" href="/cgi-bin/bizpay?token=1039713218&t=wxm-pay-reg&op=cftreg&lang=zh_CN">财付通注册测试</a>
      </p>
      -->
      
		</div>
	</div>
	
  
	
	<!--个人 申请成功后，首页显示跳转到文档的快速入口-->
	
  </div>
</script>
  
  
<script type="text/javascript">
window.WXM && (function(WXM, win){
  (function(jq){
    var h = WXM.Helpers,
      getC = h.getCookie,
      setC = h.setCookie,
      cName = 'hasWarningUser',
      isSetC = getC(cName);
    if (!isSetC || isSetC != '1'){
      jq("#warningUser").fadeIn();//show
      
      jq("#warningUser .waringClose").click(function(){
        jq("#warningUser").fadeOut();//show
        setC(cName, 1, 1);//set cookie
      });
    }

  })(jQuery);
    
  var DATA = WXM.DATA;
  
  DATA.title = "首页";
  
  DATA.todoLost = [
        
        
        
      
            
          
      
      ];
  
  DATA.quickLaunch = [
    {
      className : 'iconMsg',
      name : "实时消息",
      link : '/cgi-bin/getmessage?t=wxm-message&token=1039713218&lang=zh_CN&count=50'
    },
    {
      className : 'iconUser',
      name : "用户管理",
      link : '/cgi-bin/contactmanagepage?t=wxm-friend&token=1039713218&lang=zh_CN&pagesize=10&pageidx=0&type=0&groupid=0'
    },
    {
      className : 'iconFile',
      name : "素材管理",
      link : '/cgi-bin/operate_appmsg?sub=list&type=10&subtype=3&t=wxm-appmsgs-list-new&pagesize=10&pageidx=0&token=1039713218&lang=zh_CN'
    },
    {
      className : 'iconSetting',
      name : "个人设置",
      link : '/cgi-bin/userinfopage?t=wxm-setting&token=1039713218&lang=zh_CN'
    }
  ];
  
  DATA.textInfo = [
    {
      title   : "系统公告",
      content : '使用时有任何疑问或建议，请添加官方公众号以咨询反馈：weixingongzhong<br />或联系邮箱：<a href="mailto:weixinmp@qq.com">weixinmp@qq.com</a>'
    }
      ];
  DATA.chartsData = {
    recvMsgStat: [0,0,96,1,0,0,0],
    fansStat: [0,0,6,2,0,0,0]
  };
  DATA.userinfo = {
    NickName : "快快长大",
    FakeID   : "2390329504"
  };
  DATA.month = "7" * 1;
  DATA.day = "21" * 1;
  var initChartsFans = function(days){
    var chart = new Highcharts.Chart({
      chart: {
        renderTo:'wxChartsFans',
        zoomType:'xy',
        type:'areaspline',
        backgroundColor:'#F3F3F3'
      },
      title: {
        text: ""
      },
      credits:{
        enabled:false
      },
      xAxis: [{
        labels:{
          formatter: function() {
            return this.value;
          },
          style: {
            color: '#000'
          }
        },
        title: {
          text: '',
          style: {
            color: '#7eafdd'
          }
        },
        categories: days,
        lineColor: "#8E8E8F",
        lineWidth: 2
      }],
      yAxis: [{ // Secondary yAxis
        title: {
          text: ""
        },
        labels: {
          formatter: function() {
            return this.value + '个';
          },
          style: {
            color: '#666',
            fontFamily:'Microsoft yahei'
          }
        },
        gridLineColor:"#D2D1D1",
        allowDecimals:false
      }],
      plotOptions: {
        areaspline: {
          fillColor: "rgba(190,216,240,0.7)"
        }
      },
      legend: {
        enabled:false
      },
      tooltip:{
        backgroundColor:'#525253',
        borderColor:"#000",
        style:{
          color: "#fff"
        },
        headerFormat:'',
        pointFormat: '<b style="font-family:Microsoft yahei">{point.y}个</b>'
      },
      series: [{
        name:"",
        color: '#4E7BBF',
        lineWidth:3,
        marker: {
          lineWidth: 2,
          lineColor: '#fff'
        },
        data: DATA.chartsData.fansStat
      }],
      exporting: {
        enabled: false
      }
    });
  }
  var initChartsMsgNum = function(days){
    var chart = new Highcharts.Chart({
      chart: {
        renderTo:'wxChartsMsgNum',
        zoomType:'xy',
        type:'areaspline',
        backgroundColor:'#F3F3F3'
      },
      title: {
        text: ""
      },
      credits:{
        enabled:false
      },
      xAxis: [{
        labels:{
          formatter: function() {
            return this.value;
          },
          style: {
            color: '#000'
          }
        },
        title: {
          text: '',
          style: {
            color: '#7eafdd'
          }
        },
        categories: days,
        lineColor: "#8E8E8F",
        lineWidth: 2
      }],
      yAxis: [{ // Secondary yAxis
        title: {
          text: ""
        },
        labels: {
          formatter: function() {
            return this.value + '条';
          },
          style: {
            color: '#666',
            fontFamily:'Microsoft yahei'
          }
        },
        min: 0,
        gridLineColor:"#D2D1D1",
        allowDecimals:false
      }],
      plotOptions: {
        areaspline: {
          fillColor: "rgba(193,223,195,0.7)"
        }
      },
      legend: {
        enabled:false
      },
      tooltip:{
        backgroundColor:'#525253',
        borderColor:"#000",
        style:{
          color: "#fff"
        },
        headerFormat:'',
        pointFormat: '<b style="font-family:Microsoft yahei">{point.y}条</b>'
      },
      series: [{
        name:"",
        color: '#3A864E',
        lineWidth:3,
        marker: {
          lineWidth: 2,
          lineColor: '#fff'
        },
        data: DATA.chartsData.recvMsgStat
      }],
      exporting: {
        enabled: false
      }
    });
}
  
  function handleSysNotify(data){
    function _getTitle( checkType, checkStatus ){
      var titles = {
        1: '你的群发',
        2: '你的开发者申请',
        3: '你的头像更改',
        4: '你的昵称修改',
        5: '你的功能介绍更改',
        6: '你的信息登记',
        7: '你的信息登记',
        8: '你的信息登记',
        9: '你的信息登记',
        10: '你的信息登记'
      }, result = '';

      if( checkStatus == 3 ){
        result = '已经通过审核';
      }else if( checkStatus == 2 ){
        result = '审核不通过';
      }
      return titles[checkType] + result; 
    }

    if(data.BaseResp.Ret == 0 && data.Count){
      var innerHtml = '<ul>';
      for(var i = 0; i < data.Count; ++i){
        var item = data.List[i],
            itemClass = (i == data.Count - 1)?' class="no-extra"':'';
        innerHtml += '<li' + itemClass + '><a href="/cgi-bin/indexpage?t=wxm-notification-center&lang=zh_CN&token=1039713218&selectid=' + item.Id + '"><span><i>●</i>' + ( item.NotifyMsgType == 1 ? _getTitle( item.CheckType, item.CheckStatus ) : item['Title'] ) + '</span><em>详情</em></a></li>';
      }
      innerHtml += '</ul>';
      jQuery("#headNotifyList").html(innerHtml);
      if( data.Count ){
        jQuery("#notifyIcon").removeClass("none");
      }
    }
  }

  WXM.Handles = {
    '#main' : function(selector){
      var 
        main = WXM.Helpers.createDomByHtml(
          W.t('#tIndexMain', DATA)
        );
      main.appendTo(selector);
      if (DATA.chartsData.recvMsgStat != '' &&  DATA.chartsData.recvMsgStat != ''){
        DATA.chartsData = {
          recvMsgStat: DATA.chartsData.recvMsgStat.reverse(),
          fansStat: DATA.chartsData.fansStat.reverse()
        };
        var days = getDaysList(DATA.day, DATA.month);
        initChartsFans(days);
        initChartsMsgNum(days);
        jQuery('.quickLaunch').addClass('none');
      }else{
        jQuery('#wxChartsFans').parent().addClass('none');
        jQuery('#wxChartsMsgNum').parent().addClass('none');
      }
      
      W.ajax('/cgi-bin/sysnotify?lang=zh_CN&f=json&begin=0&count=5', {}, handleSysNotify);
      jQuery("#index-permission-tip-close").click(function(){
        W.ajax('/cgi-bin/correct?t=ajax-response&opcode=2&lang=zh_CN&token=1039713218', {});
        jQuery("#index-permission-tip").fadeOut();
      });
    }
  };

  var getDaysList = function(_day, _month){
    var yesObj = {},
      dayList = [],
      day = _day,
      month = _month;
    for(var i = 0; i < 7; i++){
      yesObj = getYesterday(day,month);
      day = yesObj.day;
      month = yesObj.month;
      dayList.push(month+'-'+day);
    }
    return dayList.reverse();
  }
  var isLeapYear = function(utc){
    var d = new Date, y = utc ? d.getUTCFullYear() : d.getFullYear();
    return !(y % 4) && (y % 100) || !(y % 400) ? true : false;
    
  };
  var getYesterday = function(day,month){
    var monthDays = [31,28,31,30,31,30,31,31,30,31,30,31],
      yDay = day - 1,
      yMonth = month;
    if(yDay <= 0){/*last month*/
      yMonth -= 1;
      yMonth = yMonth <= 0 ? 12 : yMonth;
      if(yMonth == 2 && isLeapYear()){
        yDay = 29;
      }else if(yMonth == 2 && !isLeapYear()){
        yDay = 28;
      }else{
        yDay = monthDays[yMonth - 1];
      }
    }
    return {day:yDay,month:yMonth};
  }


  jQuery('body').addClass('indexPage');

  var markSelectedInArr = WXM.Helpers.markSelectedInArr;

  /* 设置导航选中 */
  markSelectedInArr({
    tKey : '_id',
    tVal : 'home', 
    list : DATA.nav
  });
  
  WXM.main();
  
  (function(jq){
    var h = WXM.Helpers,
      getC = h.getCookie,
      setC = h.setCookie,
      cName = 'hasNotifyList',
      isSetC = getC(cName);

    if (!isSetC || isSetC != '1'){
      jq("#headNotifyList").removeClass("none");
      setC(cName, 1, 1);//set cookie
    }

  })(jQuery);

})(WXM, window);
</script>

